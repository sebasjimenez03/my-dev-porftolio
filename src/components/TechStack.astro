---
/** Types */
type Item = {
  label: string;
  level: number;
  icon: string;
};
type Category = {
  name: string;
  note: string;
  items: Item[];
};

const categories = [
  {
    name: "Frontend",
    note: "UI, performance, accessibility",
    items: [
      { label: "Angular (v9â€“17)", level: 5, icon: "angular" },
      { label: "TypeScript",       level: 5, icon: "ts" },
      { label: "JavaScript (ES6+)",level: 5, icon: "js" },
      { label: "RxJS",             level: 4, icon: "rxjs" },
      { label: "Angular Material", level: 4, icon: "material" },
      { label: "Bootstrap",        level: 4, icon: "bootstrap" },
      { label: "HTML5 / CSS3 / SCSS", level: 5, icon: "html" },
      { label: "Responsive Design", level: 5, icon: "screen" },
    ],
  },
  {
    name: "Backend & APIs",
    note: "REST, auth, modular services",
    items: [
      { label: "Node.js / Express", level: 4, icon: "node" },
      { label: "PHP",               level: 4, icon: "php" },
      { label: "Ruby on Rails",     level: 4, icon: "rails" },
      { label: "RESTful APIs",      level: 5, icon: "api" },
      { label: "OAuth2",            level: 4, icon: "lock" },
    ],
  },
  {
    name: "Data",
    note: "modeling, queries, exports",
    items: [
      { label: "PostgreSQL", level: 4, icon: "postgres" },
      { label: "MySQL",      level: 4, icon: "mysql" },
      { label: "Firebase",   level: 3, icon: "firebase" },
      { label: "MongoDB",    level: 3, icon: "mongo" },
      { label: "Prawn (PDF)",level: 4, icon: "pdf" },
      { label: "CSV Exports",level: 5, icon: "csv" },
    ],
  },
  {
    name: "Cloud & DevOps",
    note: "deployments, caching, CI/CD",
    items: [
      { label: "Google Cloud Platform", level: 4, icon: "gcp" },
      { label: "Cloudflare",            level: 4, icon: "cloudflare" },
      { label: "Vercel",                level: 4, icon: "vercel" },
      { label: "Hostinger",             level: 4, icon: "server" },
      { label: "Nginx",                 level: 3, icon: "nginx" },
      { label: "Docker (basic)",        level: 3, icon: "docker" },
      { label: "GitHub Actions",        level: 4, icon: "actions" },
      { label: "Jenkins",               level: 3, icon: "jenkins" },
    ],
  },
  {
    name: "Productivity & Design",
    note: "collaboration & research",
    items: [
      { label: "JIRA / Confluence", level: 4, icon: "jira" },
      { label: "Notion",            level: 4, icon: "notion" },
      { label: "Figma",             level: 3, icon: "figma" },
      { label: "Postman",           level: 5, icon: "postman" },
      { label: "Chrome DevTools",   level: 5, icon: "chrome" },
      { label: "Shopify API",       level: 3, icon: "shopify" },
      { label: "Google Maps API",   level: 4, icon: "map" },
    ],
  },
];

// quick inline svg icon map (minimal + brand-agnostic)
const Icon = ({ name }: { name: string }) => {
  const common = "w-3.5 h-3.5";
  switch (name) {
    case "angular":   return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="M12 2 2 7l10 15L22 7 12 2Zm0 3.1 6.5 3.3-2.1 9.1H7.6L5.5 8.4 12 5.1Zm0 3.7-2.9 6.6h1.9l.5-1.3h1.1l.5 1.3h1.9L12 8.8Zm.3 3.6h-0.6l0.3-0.9 0.3 0.9Z"/></svg>;
    case "ts":        return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="M3 3h18v18H3z"/><path fill="#0ea5e9" d="M7 8h10v2H13v6h-2v-6H7z"/></svg>;
    case "js":        return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><rect width="18" height="18" x="3" y="3"/><path fill="#f59e0b" d="M10 8h2v7a3 3 0 1 1-2.5-2.95V8zM14 8h4v2h-2v5a3 3 0 1 1-2-2.83V8z"/></svg>;
    case "rxjs":      return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="M18 6a8 8 0 1 0-2.8 15.5 7 7 0 1 1 2.8-15.5Z"/></svg>;
    case "material":  return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="M3 3h8v8H3zM13 13h8v8h-8zM13 3h8v8h-8zM3 13h8v8H3z"/></svg>;
    case "html":      return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="m3 3 2 18 7 2 7-2 2-18H3Zm15 5H8l.2 2h9.6l-.7 7-5.1 1.4-5.1-1.4-.3-3h2l.1 1.5 3.3.9 3.3-.9.3-3H6l-.4-4h12.4l.1-1H6.3l-.1-1H18l0 1Z"/></svg>;
    case "screen":    return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><rect x="3" y="4" width="18" height="12" rx="2"/><path d="M8 20h8" stroke="currentColor" stroke-width="2"/></svg>;
    case "node":      return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="m12 2 9 5v10l-9 5-9-5V7l9-5Zm1 5v10l4-2.2V7.8L13 7Z"/></svg>;
    case "php":       return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><ellipse cx="12" cy="12" rx="10" ry="7"/><path fill="#94a3b8" d="M7 9h3v6H8v-1H6V9h1Zm7 0h3v6h-2v-1h-2V9h1Zm-4 2h1v2H10v-2Z"/></svg>;
    case "rails":     return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="M4 20h16v2H4z"/><path d="M6 18c0-7 4-12 10-12v3c-4 0-7 4-7 9H6Z"/></svg>;
    case "api":       return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><circle cx="6" cy="12" r="2"/><circle cx="18" cy="12" r="2"/><rect x="8" y="11" width="8" height="2"/></svg>;
    case "lock":      return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><rect x="4" y="10" width="16" height="10" rx="2"/><path d="M8 10V8a4 4 0 1 1 8 0v2" stroke="currentColor" stroke-width="2"/></svg>;
    case "postgres":  return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="M6 6c4-4 8-4 12 0-1 7-3 11-6 12S7 14 6 6Z"/></svg>;
    case "mysql":     return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="M4 15c2-6 14-6 16 0-4 6-12 6-16 0Z"/></svg>;
    case "firebase":  return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="m5 17 3-12 4 6 3-4 4 10-7 3-7-3Z"/></svg>;
    case "mongo":     return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="M12 2s6 5 4 12-4 8-4 8-2-1-4-8S12 2 12 2Z"/></svg>;
    case "pdf":       return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="M6 2h9l5 5v13a2 2 0 0 1-2 2H6z"/><path d="M15 2v5h5"/></svg>;
    case "csv":       return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M7 8h10v2H7zM7 12h6v2H7z"/></svg>;
    case "gcp":       return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="8"/><path fill="#38bdf8" d="M12 6v6l5 3"/></svg>;
    case "cloudflare":return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="M5 16a5 5 0 0 1 9.8-1H20a3 3 0 1 1 0 6H7a4 4 0 0 1-2-5Z"/></svg>;
    case "vercel":    return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="m12 4 10 16H2L12 4Z"/></svg>;
    case "server":    return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><rect x="4" y="4" width="16" height="6" rx="2"/><rect x="4" y="14" width="16" height="6" rx="2"/></svg>;
    case "nginx":     return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="M12 2 2 7v10l10 5 10-5V7L12 2Zm0 4 6 3.2v5.6L12 18l-6-3.2V9.2L12 6Z"/></svg>;
    case "docker":    return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="M4 14h12v3H6a4 4 0 0 1-2-3Z"/><rect x="8" y="6" width="3" height="3"/><rect x="12" y="6" width="3" height="3"/><rect x="8" y="10" width="3" height="3"/><rect x="12" y="10" width="3" height="3"/></svg>;
    case "actions":   return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><circle cx="6" cy="12" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="18" cy="12" r="2"/></svg>;
    case "jenkins":   return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a7 7 0 0 0-7 7v3a7 7 0 1 0 14 0V9a7 7 0 0 0-7-7Z"/></svg>;
    case "jira":      return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="M4 12 12 4l8 8-8 8-8-8Z"/></svg>;
    case "notion":    return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><rect x="4" y="4" width="16" height="16" rx="2"/><path d="M9 8h2v8H9zM13 8h2v8h-2z"/></svg>;
    case "figma":     return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="8" r="3"/><circle cx="12" cy="16" r="3"/><circle cx="8" cy="12" r="3"/><circle cx="16" cy="12" r="3"/></svg>;
    case "postman":   return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="9"/><path d="M7 12h10" stroke="currentColor" stroke-width="2"/></svg>;
    case "chrome":    return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="9"/><circle cx="12" cy="12" r="4" fill="#60a5fa"/></svg>;
    case "shopify":   return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="M6 6 14 4l4 2v12l-8 2-4-2V6Z"/></svg>;
    case "map":       return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><path d="m4 6 6-2 6 2 4-2v14l-6 2-6-2-4 2V6Z"/></svg>;
    default:          return <svg class={common} viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="8"/></svg>;
  }
};

const clamp = (n: number, min = 1, max = 5) => Math.min(max, Math.max(min, n));

const Dots = ({ level }: { level: number }) => {
  const total = 5;
  const v = clamp(level, 1, total);
  return (
    <div class="flex gap-1 ml-2">
      {Array.from({ length: total }).map((_, i) => (
        <span class={`h-1.5 w-1.5 rounded-full ${i < v ? 'bg-primary' : 'bg-white/20'}`}></span>
      ))}
    </div>
  );
};
---

<section id="stack" class="py-20 md:py-28">
  <header class="mb-10 md:mb-14 flex items-end justify-between">
    <div>
      <h2 class="font-serif text-4xl md:text-5xl font-bold tracking-tightest text-white">Tech Stack</h2>
      <p class="mt-2 text-neutral">The tools I use to build performant, scalable products.</p>
    </div>
    <span class="hidden md:inline-flex items-center gap-2 text-xs px-3 py-1.5 rounded-full bg-white/5 ring-1 ring-white/10">
      <span class="inline-block h-2 w-2 rounded-full bg-primary animate-pulse"></span>
      Always learning
    </span>
  </header>

  <div class="grid gap-6 md:gap-8 grid-cols-1 md:grid-cols-2 xl:grid-cols-3">
    {categories.map((cat) => (
      <article class="group relative overflow-hidden rounded-2xl bg-white/[0.03] ring-1 ring-white/10 hover:ring-white/20 transition">
        {/* subtle gradient edge */}
        <div class="pointer-events-none absolute inset-x-0 -top-px h-px bg-gradient-to-r from-transparent via-primary/40 to-transparent"></div>

        <div class="p-6 md:p-7">
          <div class="mb-4 flex items-center justify-between">
            <h3 class="font-serif text-2xl font-bold text-white tracking-tight">{cat.name}</h3>
            <span class="text-[11px] uppercase tracking-wider text-white/60">{cat.items.length} tools</span>
          </div>
          <p class="mb-5 text-sm text-neutral">{cat.note}</p>

          <ul class="flex flex-wrap gap-2">
            {cat.items.map((t) => (
              <li class="inline-flex items-center gap-2 rounded-full bg-white/5 px-3 py-2 text-[13px] text-white/90 ring-1 ring-white/10 hover:bg-white/10 hover:ring-white/20 transition">
                <span class="shrink-0 text-primary">
                  <Icon name={t.icon} />
                </span>
                <span class="whitespace-nowrap">{t.label}</span>
                <Dots level={t.level} />
              </li>
            ))}
          </ul>
        </div>
      </article>
    ))}
  </div>
</section>
